<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Celebration</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&display=swap" rel="stylesheet">

<style>
/* ================= BASE ================= */
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: #000;
  overflow: hidden;
  font-family: 'Montserrat', sans-serif;
}

/* ================= FIREWORKS ================= */
#fireworks {
  position: fixed;
  inset: 0;
  z-index: 1;
  filter: blur(2px) brightness(0.85);
}

/* optional soft darkening */
.bg-dimmer {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle, rgba(0,0,0,0.3), #000);
  z-index: 2;
}

/* ================= CAKE STAGE ================= */
.stage {
  position: fixed;
  inset: 0;
  z-index: 3;

  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  opacity: 0;
  animation: stageIn 3s ease forwards;
  animation-delay: 2s;
}

/* ================= TEXT ================= */
.subtitle {
  color: #aaa;
  font-size: 16px;
  margin-bottom: 10px;
  opacity: 0;
  animation: fadeIn 2s ease forwards;
  animation-delay: 3s;
}

.instruction {
  color: #fff;
  font-size: 22px;
  margin-bottom: 40px;
  opacity: 0;
  animation: fadeIn 2s ease forwards;
  animation-delay: 3.5s;
}

/* ================= CAKE ================= */
.cake-wrapper {
  position: relative;
  width: 260px;
  height: 300px;
  opacity: 0;
  transform: scale(0.9);
  animation: cakeIn 2s ease forwards;
  animation-delay: 4s;
}

/* plate */
.plate {
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 320px;
  height: 30px;
  background: radial-gradient(#ddd, #aaa);
  border-radius: 50%;
  transform: translateX(-50%);
}

/* cake body */
.cake {
  position: absolute;
  bottom: 20px;
  left: 50%;
  width: 220px;
  height: 160px;
  transform: translateX(-50%);
}

/* layers */
.layer {
  position: absolute;
  width: 100%;
  height: 50px;
  background: linear-gradient(#ffb703, #f4a261);
  border-radius: 0 0 20px 20px;
}

.layer:nth-child(1) { bottom: 0; }
.layer:nth-child(2) { bottom: 50px; }
.layer:nth-child(3) { bottom: 100px; }

/* top cream */
.top-cream {
  position: absolute;
  top: -25px;
  width: 100%;
  height: 40px;
  background: #fff;
  border-radius: 50%;
}

/* candle */
.candle {
  position: absolute;
  top: -55px;
  left: 50%;
  width: 10px;
  height: 40px;
  background: linear-gradient(#ff6b6b, #ff8787);
  border-radius: 4px;
  transform: translateX(-50%);
}

.flame {
  position: absolute;
  top: -18px;
  left: 50%;
  width: 14px;
  height: 18px;
  background: radial-gradient(circle, #fff 20%, #ffd166 60%, #ff9f1c 100%);
  border-radius: 50%;
  transform: translateX(-50%);
  animation: flicker 0.15s infinite alternate;
}

.candle.out .flame {
  opacity: 0;
  transform: translateX(-50%) scale(0.2);
  transition: all 0.6s ease;
}

/* slices */
.slice-left, .slice-right {
  position: absolute;
  top: 0;
  width: 50%;
  height: 100%;
  overflow: hidden;
  transition: transform 1.2s ease;
}

.slice-left { left: 0; }
.slice-right { right: 0; }

/* knife */
.knife {
  position: absolute;
  top: -160px;
  left: 50%;
  width: 8px;
  height: 160px;
  background: linear-gradient(#eee, #aaa);
  border-radius: 4px;
  transform: translateX(-50%);
  opacity: 0;
}

/* cut */
.cut .knife {
  animation: knifeDown 0.8s ease forwards;
}
.cut .slice-left {
  transform: translateX(-30px) rotate(-2deg);
}
.cut .slice-right {
  transform: translateX(30px) rotate(2deg);
}

/* ================= ANIMATIONS ================= */
@keyframes stageIn { to { opacity: 1; } }
@keyframes cakeIn { to { opacity: 1; transform: scale(1); } }
@keyframes fadeIn { to { opacity: 1; } }
@keyframes knifeDown { to { opacity: 1; transform: translate(-50%, 210px); } }
@keyframes flicker {
  from { transform: translateX(-50%) scale(1); }
  to { transform: translateX(-50%) scale(0.9); }
}
</style>
</head>

<body>

<!-- ================= FIREWORKS ================= -->
<canvas id="fireworks"></canvas>
<div class="bg-dimmer"></div>

<!-- ================= CAKE ================= -->
<div class="stage">

  <div class="subtitle">
    em ankoku low budget cake cut idhi
  </div>

  <div class="instruction">
    Press <b>ENTER</b> to cut the cake ðŸŽ‚
  </div>

  <div class="cake-wrapper" id="cakeBox">

    <div class="knife"></div>

    <div class="cake">

      <div class="candle" id="candle">
        <div class="flame"></div>
      </div>

      <div class="slice-left">
        <div class="layer"></div>
        <div class="layer"></div>
        <div class="layer"></div>
        <div class="top-cream"></div>
      </div>

      <div class="slice-right">
        <div class="layer"></div>
        <div class="layer"></div>
        <div class="layer"></div>
        <div class="top-cream"></div>
      </div>

    </div>

    <div class="plate"></div>
  </div>

</div>

<script>
/* ================= FIREWORKS ================= */
const canvas = document.getElementById("fireworks");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

const rand = (a,b)=>Math.random()*(b-a)+a;
const fireworks=[], particles=[];

class Firework {
  constructor(){
    this.x = rand(canvas.width*0.2, canvas.width*0.8);
    this.y = canvas.height;
    this.ty = rand(canvas.height*0.15, canvas.height*0.3);
    this.s = rand(2,3);
  }
  update(){
    this.y -= this.s;
    if(this.y<=this.ty){
      for(let i=0;i<70;i++)particles.push(new Particle(this.x,this.y));
      return true;
    }
  }
  draw(){
    ctx.globalAlpha=.6;
    ctx.fillStyle="#bbb";
    ctx.beginPath();
    ctx.arc(this.x,this.y,1.5,0,Math.PI*2);
    ctx.fill();
  }
}

class Particle{
  constructor(x,y){
    this.x=x;this.y=y;
    this.vx=rand(-1.4,1.4);
    this.vy=rand(-1.4,1.4);
    this.l=rand(120,180);
    this.a=rand(.6,.9);
    this.h=rand(0,360);
    this.r=rand(.8,1.8);
  }
  update(){
    this.x+=this.vx;
    this.y+=this.vy;
    this.vy+=.008;
    this.l--;this.a-=.003;
  }
  draw(){
    ctx.globalAlpha=this.a;
    ctx.shadowBlur=12;
    ctx.shadowColor=`hsl(${this.h},100%,60%)`;
    ctx.fillStyle=`hsl(${this.h},100%,55%)`;
    ctx.beginPath();
    ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
    ctx.fill();
  }
}

function animate(){
  ctx.fillStyle="rgba(0,0,0,.2)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  fireworks.forEach((f,i)=>{if(f.update())fireworks.splice(i,1);else f.draw();});
  particles.forEach((p,i)=>{p.update();p.draw();if(p.l<=0||p.a<=0)particles.splice(i,1);});
  requestAnimationFrame(animate);
}

setInterval(()=>fireworks.push(new Firework()),1200);
animate();

/* ================= CAKE CUT ================= */
let cut=false;
document.addEventListener("keydown",e=>{
  if(e.key==="Enter"&&!cut){
    cut=true;
    document.getElementById("candle").classList.add("out");
    setTimeout(()=>document.getElementById("cakeBox").classList.add("cut"),600);
  }
});
</script>

</body>
</html>
